/*
name:flyer-ui v 0.1.2类库
Author: Ken (郑鹏飞)
Site : http://www.flyerui.com
License：MIT
打包时间:2017-07-26
*/
!function(a,b,c){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?c(a,!0):function(a){if(!a.document)throw new Error("The plug-in needs to be on the support document rendering environment.");if(!b)throw new Error("The plug-in needs to be on the support jQuery rendering environment.");return c(a)}:c(a,b)}("undefined"!=typeof window?window:this,jQuery,function(a,b,c){"use strick";var d=function(){this.vision="0.1.1"},e=a,f=Array.prototype.slice,g=e.location,h=d.fn=d.prototype={format:function(){var a,b=f.call(arguments),c=b.length;if(c>0){for(var d=1,a=b[0];c>d;d++)a=a.replace(new RegExp("\\{"+d+"\\}","g"),b[d]);return a}return this},formatDate:function(a,b){return a instanceof String?(b=this.getDate(b),a.replace(/yyyy/gi,b.year).replace(/mm/,this.fullTime(b.month)).replace(/dd/gi,this.fullTime(b.day)).replace(/hh/gi,this.fullTime(b.hours)).replace(/MM/,this.fullTime(b.minutes)).replace(/ss/gi,this.fullTime(b.seconds))):(flyer.log("error","format is not defined."),!1)},getDate:function(a){return a=a||new Date,{year:a.getFullYear(),month:a.getMonth()+1,day:a.getDate(),hours:a.getHours(),minutes:a.getMinutes(),seconds:a.getSeconds()}},fullTime:function(a){return a>=10?a:"0"+a},getQueryString:function(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)"),c=g.search.substr(1).match(b);return null!==c?unescape(c[2]):null},escapeHTML:function(a){return"string"==typeof a&&a.length>0?a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;").replace(/ /g,"&nbsp;").replace(/\n/g,"<br/>"):a},unescapeHTML:function(a){return"string"==typeof a&&a.length>0?a.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&nbsp;/g," ").replace(/<br\/>/g,"\n"):a},today:function(){return(new Date).toISOString().replace(/T.+/,"")},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},stop:function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},getFnName:function(a){return/^[\s\(]*function(?:\s+([\w$_][\w\d$_]*))?\(/.exec(a.toString())[1]||""},isEmpty:function(a){var b=[null,"undefined",void 0,"N/A","0",0,"null",!1,"false"];return b.indexOf(a)>0?!1:!0},isObject:function(a){return"object"==typeof a},isFunction:function(a){return"function"==typeof a},isArray:function(a){return a instanceof Array},isString:function(a){return"string"==typeof a},isjQuery:function(a){return a instanceof jQuery},isUndefined:function(a){return"undefined"==typeof a},log:function(a,b){var c=f.call(arguments);1===c.length?(b=a,console.log(b)):c.length>1&&console[a](b)}};h.define=function(a,b){h[a]=b},h.extend=function(a,b){var c,d={};if(h.isObject(a)?b=a:h.isFunction(a)&&(b=a),h.isFunction(b)&&(b=b.call(this)),h.isString(a)){for(c in b)d[c]=b[c];this[a]=d}else for(c in b)this[c]=b[c];return this},a.flyer=new d}),flyer.extend("store",function(){function a(){return"undefined"==typeof c&&(c=window.localStorage),!0}function b(a){return"string"!=typeof a?!1:d.test(a)}var c,d=/^[0-9A-Za-z_@-]*$/;return{set:function(d,e){var f=!1;if(b(d)&&a())try{e+="",c.setItem(d,e),f=!0}catch(g){}return f},get:function(d){if(b(d)&&a())try{return c.getItem(d)}catch(e){}return null},remove:function(d){if(b(d)&&a())try{return c.removeItem(d),!0}catch(e){}return!1},clear:function(){if(a()){try{for(var b in c)c.removeItem(b);return!0}catch(d){}return!1}}}}),flyer.define("combobox",function(a,b){var c=["flyer-combobox","flyer-combobox-contents","filter-options","fa-angle-down","flyer-combobox-items","flyer-combobox-search","fa-search","selected","open","fa-angle-down","fa-angle-up"],d=(document.body,document,location,window,function(a,b){return this.init(a,b)});return d.DEFAULTS={isMulti:!0,disabled:!1,allowSearch:!0,multipleSeparator:";",fieldKey:"value",required:!0,name:"comboBox",fieldValue:"text",placeholder:"placeholder",searchPlaceholder:"在这里可以快捷搜索到你想找的..",url:"",data:[],selectAll:!0,allowSelectAll:!0,allText:"All",allValue:"-1",defaultValue:"",fnDataProcessing:function(){this.data=this.data.rows},fnSelected:function(){return!1},fnBeforeSelected:function(){},fnAfterSelected:function(){}},d.prototype={init:function(a,b){this.options=$.extend(!0,{},d.DEFAULTS,b),this.selector=a,this[0]=$(a),this._data={},this.requestData(),this.initDefaultValue()},template:function(){var a=this.options,b=this,d=['<div class="flyer-combobox">','<div class="flyer-combobox-contents">','<input type="text" class="filter-options" name="'+a.name+'" required="'+a.required+'" placeholder='+a.placeholder+' readonly="readonly" /><i class="fa fa-angle-down"></i>',"</div>",'<div class="flyer-combobox-items">',a.allowSearch?'<div class="flyer-combobox-search"><input placeholder="'+a.searchPlaceholder+'" type="text"><i class="fa fa-search"></i></div>':"","<ul>",b.allowAllItem()?"<li data-index='-1' data-key='"+a.allValue+"' data-value='"+a.allText+"'><div>"+a.allText+"</div></li>":"",b.readerItems(),"</ul>","</div>","</div>"];b.isSelectHtml()?(this[0]=this[0].parent(),this[0].append(d.join(""))):this[0].html(d.join("")),this.$itemContainer=this[0].find("."+c[4]),this.$contents=this[0].find("."+c[1]),this.$items=this.$itemContainer.find("li"),this.$filterOptions=this.$contents.find("."+c[2]).eq(0)},readerItems:function(){for(var a=[],b=this.options,c=b.data,d=0,e=c.length;e>d;d++)a.push("<li data-index="+d+" data-key="+c[d][b.fieldKey]+" data-value="+c[d][b.fieldValue]+"><div>"+c[d][b.fieldValue]+"</div></li>");return a.join("")},requestData:function(){var a=this,b=this.options,c=b.data;0==c.length&&b.url.length>0?$.getJSON(this.options.url,function(c){b.data=c,b.fnDataProcessing(),a.template(),a.initEvents()}):this.isSelectHtml()?(a.readHtmlToData(),a.template(),a.initEvents()):(a.template(),a.initEvents())},isSelectHtml:function(){return"SELECT"===this[0].prop("tagName")},readHtmlToData:function(){var a=this[0].get(0),b=a.children;if(a){a.style.display="none";for(var c=0,d=b.length;d>c;c++){for(var e={},f=0,g=b[c].attributes,h=g.length;h>f;f++)g[f].name.indexOf("data-")>-1&&(e[g[f].name.replace("data-","")]=g[f].value);e[this.options.fieldValue]=b[c].text,this.options.data.push(e)}}},initEvents:function(){var a=this,b=a.options;a.$contents.on("click",function(b){a.$itemContainer.hasClass(c[8])?a.hideItems.call(a):(a.$itemContainer.addClass(c[8]),a.$contents.find("i").removeClass(c[9]).addClass(c[10])),flyer.stop(b)}),a.$items.each(function(){$(this).on("click",function(d){var e=$(this),f=e.hasClass(c[7])?!0:!1,g={fieldKey:e.data("key"),fieldValue:e.data("value")};"-1"==g.fieldKey&&g.fieldValue==b.allValue?a.empty():a.unselectAll(),a.showSelectedItem(g,f),b.fnSelected.call(a,g,this,a._data),b.isMulti||(a.hideItems.call(a),a.$items.removeClass(c[7])),f?e.removeClass(c[7]):e.addClass(c[7]),a.allowAllItem()&&a.checkSelectAll(),flyer.stop(d)})}),$(document).on("click",function(b){a.hideItems(),flyer.stop(b)})},allowAllItem:function(){var a=this.options;return a.selectAll&&a.isMulti&&a.data.length>1},showSelectedItem:function(a,b){var c=this.options,d=this.$filterOptions.data("key")||"",e=this.$filterOptions.val()||"";c.isMulti?b?(d=String(d).replace(a.fieldKey+c.multipleSeparator,""),e=e.replace(a.fieldValue+c.multipleSeparator,"")):(d=String(d)+a.fieldKey+c.multipleSeparator,e=e+a.fieldValue+c.multipleSeparator):(d=a.fieldKey,e=a.fieldValue),this.$filterOptions.val(e),this.$filterOptions.data("key",d),this._data={fieldKey:d,fieldValue:e}},selectAllItems:function(a){var b=this,d=(this.options,$(a));"select"==d.attr("all")?(this.$items.removeClass(c[7]),d.attr("all","unselect"),b.empty()):(this.$items.each(function(){var a=$(this),d={fieldKey:a.data("key"),fieldValue:a.data("value")};a.addClass(c[7]),"-1"!=d.fieldKey&&b.showSelectedItem(d)}),d.attr("all","select"))},unselectAll:function(){var a=this.$itemContainer.find("[data-index='-1']");a.hasClass(c[7])&&(a.removeClass(c[7]),a.attr("all","select"),this.empty())},checkSelectAll:function(){var a=this.$itemContainer.find("."+c[7]).length,b=this.$itemContainer.find("[data-index='-1']");a==this.options.data.length&&(this.empty(),b.click())},hideItems:function(){this.$itemContainer.removeClass(c[8]),this.$contents.find("i").removeClass(c[10]).addClass(c[9])},filterData:function(){},getSelectedData:function(){return this._data},getSelectedValue:function(){return this.clearLastSeparator(this._data.fieldKey)},getSelectedText:function(){return this.clearLastSeparator(this._data.fieldValue)},clearLastSeparator:function(a){a=String(a);var b=a.lastIndexOf(this.options.multipleSeparator);return b+1===a.length?a.substring(0,b):a},setValue:function(a){var b=this.$itemContainer.find("[data-key='"+a.fieldKey+"']");this._data={fieldKey:a.fieldKey,fieldValue:a.fieldValue||b.data("value")},this.$filterOptions.val(this.getSelectedText()),this.$filterOptions.data("key",this.getSelectedValue()),b.addClass(c[7])},setValues:function(a){for(var b="",d="",e=this.options,f=0,g=a.length;g>f;f++){var h=this.$itemContainer.find("[data-key='"+a[f].fieldKey+"']");b=b+a[f].fieldKey+e.multipleSeparator,d=d+(a[f].fieldValue||h.data("value"))+e.multipleSeparator,h.addClass(c[7])}this._data={fieldKey:b,fieldValue:d},this.$filterOptions.val(this.getSelectedText()),this.$filterOptions.data("key",this.getSelectedValue())},empty:function(){this._data={fieldKey:"",fieldValue:""},this.options.defaultValue="",this.$filterOptions.val(this.getSelectedText()),this.$filterOptions.data("key",this.getSelectedValue()),this.$items.removeClass(c[7])},initDefaultValue:function(){var a=this.options.defaultValue;flyer.isString(a)&&a.length>0&&this.setValue({fieldKey:a})}},new d(a,b)}),flyer.define("page",function(a,b){function c(a,b){return this.init(a,b)}return c.DEFAULTS={ajax:{URL:null,data:null},data:[],curIndex:1,pageIndex:1,pageSize:5,prevText:"<i class='fa fa-caret-left'></i>",nextText:"<i class='fa fa-caret-right'></i>",totalNum:0,pagerLen:5,pageSum:0,isReload:!1,fnBeforeClick:function(){return!1},fnClick:function(){return!1},fnAfterClick:function(){return!1}},c.prototype={init:function(a,b){this.options=this.getOptions(b),this[0]=a,this.render()},render:function(){var a=this,b=a.options;b.ajax;return b.pageSum=Math.ceil(b.totalNum/b.pageSize),b.pageSum<=0?($(this[0]).empty(),a):(b.pageSum<=b.pagerLen||b.pageSum-b.pagerLen==b.pageIndex?$(this[0]).html(a.simpleTemplate()):$(this[0]).html(a.template()),void a.addEvent())},getOptions:function(a){return $.extend(!0,{},c.DEFAULTS,a)},reload:function(){this.render()},template:function(){var a='<div class="flyer-pager-wrapper"><div class="flyer-pager-view"><ul>',b=this.options,c=Math.floor((b.pagerLen-2)/2),c=0==c?1:c,d=b.curIndex<b.pagerLen?b.pageIndex:b.curIndex-c,e=b.curIndex<b.pagerLen?b.pagerLen:b.curIndex+c;for(b.curIndex+2*c>b.pageSum-1&&(d=b.pageSum-b.pagerLen,e=b.pageSum),a+='<li class="prev">'+b.prevText+"</li>",b.curIndex>=b.pagerLen&&(a+="<li>"+b.pageIndex+"</li>",a+='<li class="omit">...</li>'),d;e>=d;d++)a+=b.curIndex==d?'<li class="active">'+d+"</li>":"<li>"+d+"</li>";return b.curIndex+2*c<=b.pageSum-1&&(a+='<li class="omit">...</li>',a+="<li>"+b.pageSum+"</li>"),a+='<li class="next">'+b.nextText+"</li>",a+="</ul></div></div>"},simpleTemplate:function(){var a='<div class="flyer-pager-wrapper"><div class="flyer-pager-view"><ul>',b=this.options,c=b.pageIndex;for(len=b.pageSum,a+='<li class="prev">'+b.prevText+"</li>",c;c<=len;c++)a+=b.curIndex==c?'<li class="active">'+c+"</li>":"<li>"+c+"</li>";return a+='<li class="next">'+b.nextText+"</li>",a+="</ul></div></div>"},addEvent:function(){var a=this,b=a.options,c=$(a[0]).find(".flyer-pager-view").find("li");c.each(function(){var d=$(this);d.hasClass("omit")||d.on("click",function(){if(d.hasClass("next")){if(b.curIndex>=b.pageSum)return this;b.curIndex++}else if(d.hasClass("prev")){if(b.curIndex<=b.pageIndex)return this;b.curIndex--}else b.curIndex=parseInt(d.text());if(b.curIndex<=b.pageSum){if(a.reload(),d.hasClass("next")||d.hasClass("prev")){var e=c.parent().find(".active");c.removeClass("active"),e.next().addClass("active")}else c.removeClass("active"),d.addClass("active");b.fnClick.call(a)}})})}},new c(a,b)}),flyer.extend(function(a,b){var c=["flyer-modal","flyer-dialog","flyer-dialog-title","flyer-dialog-toolbar","flyer-close","flyer-dialog-content","flyer-dialog-footer","flyer-btn","flyer-dialog-move"],d=(document.body,document,location,window,function(a){return this.init(a)});return d.DEFAULTS={container:"body",title:"",content:"",isMove:!0,timer:4e3,offset:"auto",fixed:!0,skin:"",area:[],btnAlign:"c",cancel:function(){return!1},showCancelBtn:!0,modalClose:!1,isModal:!1,autoClose:!0,pageUrl:"",anim:"bounceInDown",isOutAnim:!0,btns:[{text:"取消",skin:"",click:function(){this.close()}}]},d.prototype={init:function(a){this.index=(new Date).getTime(),this.options=$.extend(!0,{},d.DEFAULTS,a),this.$container=$(this.options.container),this.template(),this.bindEvents()},bindEvents:function(){var a=this,b=a.options;this.$title.on("mousedown",function(b){a.mousedown(b)}),$(document).mousemove(function(b){a.mousemove(b)}),$(document).mouseup(function(b){a.mouseup(b)}),this.$btnClose.on("click",function(c){b.cancel.call(this),a.close(),flyer.stop(c)});for(var c=0,d=b.btns,e=a.$btns,f=this.$btns.length;f>c;c++)!function(b,c){$(b).on("click",function(){c.click.call(a,b)})}(e[c],d[c])},template:function(){var a=this.options;this.selector=c[1]+this.index,this.modalSelector=c[0]+this.selector;var b=['<div id="'+this.modalSelector+'" class="'+c[0]+'"></div>','<div id="'+this.selector+'" class="'+c[1]+(a.skin.length>0?" "+a.skin:"")+(a.anim.length&&a.isOutAnim>0?" "+a.anim:"")+'">','<div class="'+c[2]+(a.isMove?" flyer-move":"")+'">',"<h4> ",a.title,"</h4>","</div>",'<div class="'+c[3]+'">',a.showCancelBtn?'<i class="'+c[4]+'">x</i>':"","</div>",'<div class="'+c[5]+'">',a.content,"</div>",'<div class="'+c[6]+'">',this.builderBtn(),"</div>","</div>"];a.isModal||b.splice(0,1),this.$container.append(b.join("")),this.$el=$("#"+this.selector),this.$title=this.$el.find("."+c[2]),this.$content=this.$el.find("."+c[5]),this.$footer=this.$el.find("."+c[6]),this.$toolbar=this.$el.find("."+c[3]),this.$btnClose=this.$el.find("."+c[4]),this.$btns=this.$el.find("."+c[7]),this.$modal=$("#"+this.modalSelector),this.handtailor(),this.setOffset()},handtailor:function(){var a=this.options,b=this;switch(a.modalClose&&a.isModal&&b.$modal.on("click",function(){b.close()}),0===a.title.length&&this.$title.remove(),a.area.length>1&&this.$content.css({width:a.area[0],height:a.area[1]}),a.offset instanceof Array&&a.offset.length>1&&this.$el.css({top:a.offset[0],left:a.offset[1]}),a.fixed&&this.$el.css("position","fixed"),a.btnAlign){case"c":this.$footer.css("text-align","center");break;case"r":this.$footer.css("text-align","right");break;case"l":this.$footer.css("text-align","left")}},mousedown:function(a){var b=this.options;$("#"+this.selector).find("."+c[2]);this.isMove="undefined"!=typeof b&&"undefined"!=typeof b.isMove?b.isMove:!0,this.isMove&&(this.offsetX=a.offsetX,this.offsetY=a.offsetY,this.$el.data("position",this.$el.css("position")),this.$el.css({position:"absolute",top:parseInt(this.$el.css("top"))+parseInt(this.getScrollTop())}),document.body.onselectstart=function(){return!1})},mousemove:function(a){if(this.isMove){var b=a.clientX-this.offsetX,c=a.clientY-this.offsetY+parseInt(this.getScrollTop());this.$el.css({top:c,left:b})}},mouseup:function(){this.isMove&&(this.isMove=!1,this.$el.css({position:this.$el.data("position"),top:parseInt(this.$el.css("top"))-parseInt(this.getScrollTop())}),document.body.onselectstart=function(){return!0})},builderBtn:function(){for(var a=this.options,b=a.btns,d=[],e=0,f=b.length;f>e;e++)d.push('<button class="'+c[7]+" "+b[e].skin+'">'+b[e].text+"</button>");return d.join("")},close:function(){this.$el.remove(),this.$modal.remove()},setOffset:function(){var a=this;switch(a.options.offset){case"auto":var b=this.getOffset(a.$el.get(0));a.$el.css({top:String(b.y)+"px",left:String(b.x)+"px"})}},getScrollTop:function(){var a=document.documentElement.scrollTop;return 0==a&&(a=document.body.scrollTop),a},getOffset:function(a){try{var b="body",c=$(b).width(),d=window.screen.height,e="undefined"!=typeof a?a.offsetWidth:0,f="undefined"!=typeof a?a.offsetHeight:0;return{x:c/2-e/2,y:d/2-f/2,w:b.offsetWidth,h:b.clientHeight}}catch(g){}}},{alert:function(a,b){b=b||{},b.content=a,b.title=b.title||"提示",b.skin=b.skin||"flyer-dialog-alert";var c=new d(b);return c},confirm:function(a,b,c){c=$.extend({btns:[{text:"确定",skin:"flyer-btn-blue",click:function(a){this.close(),"function"==typeof b&&b.call(this,a,!0)}},{text:"取消",skin:"",click:function(a){this.close(),"function"==typeof b&&b.call(this,a,!1)}}]},c),c.content=a,c.skin=c.skin||"flyer-dialog-confirm";var e=new d(c);return e},open:function(a){a.skin=a.skin||"flyer-dialog-open";var b=new d(a);return b.options.pageUrl.length>0&&(b.$content.load(b.options.pageUrl),b.setOffset()),b},msg:function(a,b){b=b||{},b.content=a,b.showCancelBtn="undefined"!=typeof b.showCancelBtn?b.showCancelBtn:!1,b.autoClose="undefined"!=typeof b.autoClose?b.autoClose:!0,b.anim=b.anim||"bounceIn",b.skin=b.skin||"flyer-dialog-msg";var c=new d(b);return c.$title.remove(),c.$footer.remove(),b.autoClose&&setTimeout(function(){c.close()},c.options.timer),c},tip:function(a,b){b=b||{},b.skin=b.skin||"flyer-dialog-tip",b.anim=b.anim||"bounceInDown",b.offset=b.offset||[0,0];var c=this.msg(a,b);return c},closeAll:function(a){if("undefined"==typeof a)$("."+c[1]).remove(),$("."+c[0]).remove();else switch(a){case"alert":$(".flyer-dialog-alert").remove();break;case"confirm":$(".flyer-dialog-confirm").remove();break;case"open":$(".flyer-dialog-open").remove();break;case"msg":$(".flyer-dialog-msg").remove();break;case"tip":$(".flyer-dialog-tip").remove()}}}}),flyer.define("edit",function(a,b){var c=function(a,b){return this.init(a,b)};return c.DEFAULTS={},c.prototype={init:function(a,b){this.options=$.extend(!0,{},c.DEFAULTS,b)}},new c(a,b)}),flyer.define("date",function(a,b){var c=function(a,b){return this.init(a,b)};return c.DEFAULTS={minDate:"1977-01-01",maxDate:"2099-12-31",startDate:new Date,isSure:!0,isClear:!0,isToday:!0,isTime:!0,festival:!0,format:"yyyy-mm-dd HH:MM:SS",isPrecision:!1,click:function(){return!1},choose:function(){return!1}},c.prototype={init:function(a,b){this.options=$.extend(!0,{},c.DEFAULTS,b),this.selector=this.isJQuery(a)?a:$(a),this._date=this.getYMD(this.selector.val().replace(/-/gi,"/")),this.initEvent()},refresh:function(){this.template(),this.events(),this.isPickerBtnStatus()},i18n:{},template:function(){var a=this._date,b=this.options,c=['<div class="flyer-date" id="flyer-date-'+this.selector.attr("id")+'">','<div class="flyer-date-header">','<div class="flyer-date-year">','<button class="prev"></button>','<input type="text" class="flyer-year" value="'+a.year+'" readonly="true" />','<button class="more"></button>','<button class="next"></button>','<div class="flyer-date-yearMore">','<div class="prev-more"></div>','<div class="years">',this.initYears(),"</div>",'<div class="next-more"></div>',"</div>","</div>",'<div class="flyer-date-month">','<button class="prev"></button>','<input type="text" class="flyer-month" value="'+a.month+'" readonly="true" />','<button class="more"></button>','<button class="next"></button>','<div class="flyer-date-monthMore">',this.initMonths(),"</div>","</div>","</div>",'<div class="flyer-date-body">',"<table>","<thead>","<tr>","<th>日</th>","<th>一</th>","<th>二</th>","<th>三</th>","<th>四</th>","<th>五</th>","<th>六</th>","</tr>","</thead>","<tbody>",this.initDays(),"</tbody>","<tfoot></tfoot>","</table>","</div>",'<div class="flyer-date-footer">',b.isTime?this.initHMS():"",'<div class="flyer-date-btn">',b.isClear?'<button class="flyer-clear">清空</button>':"",b.isToday?'<button class="flyer-today">今天</button>':"",b.isSure?'<button class="flyer-confirm">确认</button>':"","</div>","</div>","</div>"];this.container?(c.splice(0,1),c.splice(c.length-1,1),this.container.html(c.join(""))):$("body").append(c.join("")),this.container=$("#flyer-date-"+this.selector.attr("id")),this.$header=this.container.find(".flyer-date-header"),this.$headerYear=this.$header.find(".flyer-date-year"),this.$headerMonth=this.$header.find(".flyer-date-month"),this.$body=this.container.find(".flyer-date-body"),this.$footer=this.container.find(".flyer-date-footer"),this.$footerTime=this.$footer.find(".flyer-date-time"),this.$footerBts=this.$footer.find(".flyer-date-btn")},initYears:function(a){for(var b=[],c=parseInt(a||this._date.year),d=c-4;c+8>d;d++)b.push("<span class='"+(this.isEffectiveDateForYear(d)?"":"flyer-dont-select")+"' month='"+d+"'>"+d+"</span>");return b.join("")},initMonths:function(){for(var a=[],b=1;12>=b;b++)a.push("<span class='"+(this.ifEffectiveDateForMonth(b)?"":"flyer-dont-select")+"' month='"+b+"'>"+this.justShowText(b)+"</span>");return a.join("")},initHMS:function(){var a=['<div class="flyer-date-time">',"<label>时间</label>",'<span class="hour">'+this._date.hours+"</span>:",'<span class="minute">'+this._date.minutes+"</span>:",'<span class="second">'+this._date.second+"</span>",this.initHours(),this.initMinutes(),this.initSeconds(),"</div>"];return a.join("")},initDays:function(){for(var a=[],b=this.getStart(),c=(this.getEnd(),this._date),d=this.getMonthDays(c.month,c.year),e=!1,f=d+b,g=1,h=1,i=0;f>=g;g++)0==i&&a.push("<tr>"),i==b&&(e=!0),h>d&&(e=!1),e?(a.push("<td class='"+(h==parseInt(this._date.day)?"flyer-today ":"")+(this.isEffectiveDate(h)?"":"flyer-dont-select")+"'>"+h+"</td>"),h++):a.push("<td class='flyer-dont-select'>&nbsp;</td>"),i++,7==i&&(a.push("</tr>"),i=0);return a.join("")},isEffectiveDate:function(a,b,c){a=a||this._date.day,b=b||this._date.month,c=c||this._date.year;var d=new Date(this.precisionFormat(a,b,c)),e=new Date(this.minDate||this.options.minDate),f=new Date(this.maxDate||this.options.maxDate),g=d;return f>=g&&g>=e},precisionFormat:function(a,b,c){var d=this._date.hours,e=this._date.minutes,f=this._date.second;return this.options.isPrecision?c+"/"+b+"/"+a+" "+d+":"+e+":"+f:c+"/"+b+"/"+a},isEffectiveDateForYear:function(a){var b=new Date(this.minDate||this.options.minDate),c=new Date(this.maxDate||this.options.maxDate);return a<=c.getFullYear()&&a>=b.getFullYear()},ifEffectiveDateForMonth:function(a){a=a||this._date.month,year=this._date.year;var b=new Date(year+"/"+a+"/01"),c=new Date(this.minDate||this.options.minDate),d=new Date(this.maxDate||this.options.maxDate),e=new Date(c.getFullYear()+"/"+(c.getMonth()+1)+"/01"),f=new Date(d.getFullYear()+"/"+(d.getMonth()+1)+"/01");return f>=b&&b>=e},isEffectiveForDate:function(a){var b=new Date(this.minDate||this.options.minDate),c=new Date(this.maxDate||this.options.maxDate),d=new Date(a);return c>=d&&d>=b},isPickerBtnStatus:function(){this.isEffectiveForDate(new Date)?this.$footerBts.find(".flyer-today").removeClass("flyer-dont-select"):this.$footerBts.find(".flyer-today").addClass("flyer-dont-select"),this.isEffectiveForDate(this.formatDate())?this.$footerBts.find(".flyer-confirm").removeClass("flyer-dont-select"):this.$footerBts.find(".flyer-confirm").addClass("flyer-dont-select")},initHours:function(){var a=this;return['<div class="flyer-date-hours">','<div class="flyer-date-minTool">小时<span>x</span></div>','<div class="flyer-hours">',function(){for(var b=[],c=1;24>c;c++)b.push("<span>"+a.justShowText(c)+"</span>");return b.join("")}(),"</div>","</div>"].join("")},initMinutes:function(){var a=this;return['<div class="flyer-date-minutes">','<div class="flyer-date-minTool">分钟<span>x</span></div>','<div class="flyer-minutes">',function(){for(var b=[],c=1;60>c;c++)b.push("<span>"+a.justShowText(c)+"</span>");return b.join("")}(),"</div>","</div>"].join("")},initSeconds:function(){var a=this;return['<div class="flyer-date-seconds">','<div class="flyer-date-minTool">秒数<span>x</span></div>','<div class="flyer-seconds">',function(){for(var b=[],c=1;60>c;c++)b.push("<span>"+a.justShowText(c)+"</span>");return b.join("")}(),"</div>","</div>"].join("")},isLeapYear:function(a){return a%4==0&&a%100!=0||a%400==0?!0:!1},getYMD:function(a){var b=new Date(a||this.options.startDate);return{year:b.getFullYear(),month:this.justShowText(b.getMonth()+1),day:this.justShowText(b.getDate()),hours:this.justShowText(b.getHours()),minutes:this.justShowText(b.getMinutes()),second:this.justShowText(b.getSeconds())}},justShowText:function(a){return a>=10?a:"0"+a},getMonthDays:function(a,b){switch(parseInt(a)){case 2:return this.isLeapYear(b)?29:28;case 4:case 6:case 9:case 11:return 30;default:return 31}},getDay:function(a){return new Date(a).getDay()},getStart:function(){var a=this._date;return this.getDay(a.year+"/"+a.month+"/01")},getEnd:function(){var a=this._date;return this.getDay(a.year+"/"+a.month+"/"+this.getMonthDays(a.month,a.year))},formatDate:function(){return this.options.format.replace(/yyyy/gi,this._date.year).replace(/mm/,this._date.month).replace(/dd/gi,this._date.day).replace(/hh/gi,this._date.hours).replace(/MM/,this._date.minutes).replace(/ss/gi,this._date.second)},close:function(){this.container.css({display:"none"})},closeAll:function(){$(".flyer-date").hide()},setMaxDate:function(a){this.maxDate=a},setMinDate:function(a){this.minDate=a},targetIsShow:function(a){a.hasClass("flyer-date-show")?a.removeClass("flyer-date-show"):a.addClass("flyer-date-show")},isJQuery:function(a){return a instanceof jQuery},initEvent:function(){var a=this;this.selector.on("click",function(b){a.closeAll(),a.refresh();var c=$("#flyer-date-"+a.selector.attr("id")),d=a.selector.offset();c.css({top:d.top+a.selector[0].offsetHeight+"px",left:d.left+"px",display:"block"}),flyer.stop(b)})},events:function(){var a=this;this.$headerYear.on("click",".more,.flyer-year",function(){var b=$(this).parent().find(".flyer-date-yearMore");a.targetIsShow(b)}),this.$headerMonth.on("click",".more,.flyer-month",function(){var b=$(this).parent().find(".flyer-date-monthMore");a.targetIsShow(b)}),this.$headerYear.on("click",".next,.prev",function(){var b=$(this).hasClass("next");a._date.year=b?parseInt(a._date.year)+1:parseInt(a._date.year)-1,a.refresh()}),this.$headerMonth.on("click",".next,.prev",function(){var b=$(this).hasClass("next");b?parseInt(a._date.month)<12&&(a._date.month=a.justShowText(parseInt(a._date.month)+1)):parseInt(a._date.month)>1&&(a._date.month=a.justShowText(parseInt(a._date.month)-1)),a.refresh()}),this.$headerMonth.on("click",".flyer-date-monthMore span:not([class='flyer-dont-select'])",function(){a._date.month=$(this).text(),a.refresh()}),this.$headerYear.on("click",".flyer-date-yearMore span:not([class='flyer-dont-select'])",function(){a._date.year=$(this).text(),a.refresh()}),this.$headerYear.on("click",".prev-more,.next-more",function(){var b=$(this).hasClass("next-more");b?a.$headerYear.find(".years").html(a.initYears(a.$headerYear.find(".flyer-date-yearMore span").last(0).text())):a.$headerYear.find(".years").html(a.initYears(a.$headerYear.find(".flyer-date-yearMore span").eq(0).text()))}),this.$body.find("td:not([class='flyer-dont-select'])").off("click"),this.$body.on("click","td:not([class='flyer-dont-select'])",function(){$(this).hasClass("flyer-dont-select")||(a._date.day=a.justShowText($(this).text()),a.options.click.call(this,a.formatDate(),a._date),a.selector.val(a.formatDate()),a.options.choose.call(this,a.formatDate(),a._date),a.close())}),this.$footerTime.on("click",".hour,.flyer-date-hours .flyer-date-minTool span",function(){var b=a.$footerTime.find(".flyer-date-hours");a.targetIsShow(b)}),this.$footerTime.on("click",".flyer-date-hours .flyer-hours span",function(){var b=a.$footerTime.find(".flyer-date-hours");a.targetIsShow(b),a.$footerTime.find(".hour").html($(this).text()),a._date.hours=$(this).text(),a.refresh()}),this.$footerTime.on("click",".minute,.flyer-date-minutes .flyer-date-minTool span",function(){var b=a.$footerTime.find(".flyer-date-minutes");a.targetIsShow(b)}),this.$footerTime.on("click",".flyer-date-minutes .flyer-minutes span",function(){var b=a.$footerTime.find(".flyer-date-minutes");a.targetIsShow(b),a.$footerTime.find(".minute").html($(this).text()),a._date.minutes=$(this).text(),a.refresh()}),this.$footerTime.on("click",".second,.flyer-date-seconds .flyer-date-minTool span",function(){var b=a.$footerTime.find(".flyer-date-seconds");a.targetIsShow(b)}),this.$footerTime.on("click",".flyer-date-seconds .flyer-seconds span",function(){var b=a.$footerTime.find(".flyer-date-seconds");a.targetIsShow(b),a.$footerTime.find(".second").html($(this).text()),a._date.second=$(this).text(),a.refresh()}),this.$footerBts.on("click",".flyer-clear",function(){a.selector.val(""),a._date=a.getYMD(),a.close()}),this.$footerBts.on("click",".flyer-today",function(){a._date=a.getYMD(new Date),a.options.click.call(this,a.formatDate(),a._date),a.selector.val(a.formatDate()),a.options.choose.call(this,a.formatDate(),a._date),a.close()}),this.$footerBts.on("click",".flyer-confirm",function(){a.options.click.call(this,a.formatDate(),a._date),a.selector.val(a.formatDate()),a.options.choose.call(this,a.formatDate(),a._date),a.close()}),$(this.container).on("click",function(a){flyer.stop(a)}),$(document).on("click",function(b){a.close()})}},new c(a,b)}),flyer.define("form",function(a,b,c){var d=function(a,b,c){return this.init(a,b,c)};return d.DEFAULTS={rules:{},messages:{},submit:".submit",isFormSumbit:!1},d.prototype={init:function(a,b,c){this.options=$.extend(!0,{},d.DEFAULTS,b),this.formElm=a,this.formElm.attr("novalidate","true"),this.getValidData(),this.errorMsg={},this.initEvent(c)},initEvent:function(a){var b=this;$(this.formElm).find(this.options.submit).on("click",function(c){try{b.submit(c,a)}catch(d){console.error(d),c.preventDefault()}})},elements:function(){return $(this.formElm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled")},elementValue:function(a){var b,c=$(a);a.type;return b=this.checkable(a.type)?$(this.formElm).find("[name='"+a.name+"']").filter(":checked").val():c.val()},attributeRules:function(a){var b={};for(var c in this.methods){var d=a.getAttribute(c);d&&(b[c]=d)}return b},getValidData:function(){for(var a=0,b=this.elements(),c=this.options.rules,d=b.length;d>a;a++){var e=b[a].name,f=this.attributeRules(b[a]);e.length>0&&!this.isEmptyObject(f)&&(c[e]=f)}},formCheck:function(){for(var a=0,b=this.elements(),c=(this.options.rules,b.length);c>a;a++){var d=b[a].name;if(!this.check(b[a]))return this.showError(d,b[a]),!1}return!0},getElementRulesByName:function(a){return this.options.rules[a]},check:function(a){var b=this.elementValue(a),c=a.name,d=this.getElementRulesByName(c),e=!0;this.errorMsg[c]=[];for(var f in d)this.methods[f].call(this,b,a,d[f])||(e=!1,this.errorMsg[c].push(this.defaultMessage(this.messages[f],d[f])));return e},format:function(a,b){return 1===arguments.length?function(){var b=$.makeArray(arguments);return b.unshift(a),$.validator.format.apply(this,b)}:void 0===b?a:(arguments.length>2&&b.constructor!==Array&&(b=$.makeArray(arguments).slice(1)),b.constructor!==Array&&(b=[b]),$.each(b,function(b,c){a=a.replace(new RegExp("\\{"+b+"\\}","g"),function(){return c})}),a)},messages:{required:"必选字段",remote:"请修正该字段",email:"请输入正确格式的电子邮件",url:"请输入合法的网址",date:"请输入合法的日期",dateISO:"请输入合法的日期 (ISO).",number:"请输入合法的数字",digits:"只能输入整数",creditcard:"请输入合法的信用卡号",equalTo:"请再次输入相同的值",accept:"请输入拥有合法后缀名的字符串",maxlength:"请输入一个长度最多是 {0} 的字符串",minlength:"请输入一个长度最少是 {0} 的字符串",rangelength:"请输入一个长度介于 {0} 和 {1} 之间的字符串",range:"请输入一个介于 {0} 和 {1} 之间的值",max:"请输入一个最大为 {0} 的值",min:"请输入一个最小为 {0} 的值"},defaultMessage:function(a,b){var c=/\$?\{(\d+)\}/g;return c.test(a)&&(a=this.format(a,b)),a},addMethods:function(a,b,c){this.methods[a]=mehthod,this.messages[a]="undefined"!=typeof c?c:this.message[a]},checkable:function(a){return/radio|checkbox/i.test(a.type)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},optional:function(a){var b=this.elementValue(a);return!this.methods.required.call(this,b,a)&&"dependency-mismatch"},findByName:function(a){return $(this.formElm).find("[name='"+a+"']");
},getLength:function(a,b){switch(b.nodeName.toLowerCase()){case"select":return $("option:selected",b).length;case"input":if(this.checkable(b))return this.findByName(b.name).filter(":checked").length}return a.length},methods:{required:function(a,b,c){if(!c)return"dependency-mismatch";if("select"===b.nodeName.toLowerCase()){var d=$(b).val();return d&&d.length>0}return this.checkable(b)?this.getLength(a,b)>0:a.length>0},email:function(a,b){return this.optional(b)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(a)},url:function(a,b){return this.optional(b)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(a)},date:function(a,b){return this.optional(b)||!/Invalid|NaN/.test(new Date(a).toString())},dateISO:function(a,b){return this.optional(b)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(a)},number:function(a,b){return this.optional(b)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(a)},digits:function(a,b){return this.optional(b)||/^\d+$/.test(a)},minlength:function(a,b,c){var d=$.isArray(a)?a.length:this.getLength(a,b);return this.optional(b)||d>=c},maxlength:function(a,b,c){var d=$.isArray(a)?a.length:this.getLength(a,b);return this.optional(b)||c>=d},rangelength:function(a,b,c){var d=$.isArray(a)?a.length:this.getLength(a,b);return this.optional(b)||d>=c[0]&&d<=c[1]},min:function(a,b,c){return this.optional(b)||a>=c},max:function(a,b,c){return this.optional(b)||c>=a},range:function(a,b,c){return this.optional(b)||a>=c[0]&&a<=c[1]},step:function(a,b,c){},equalTo:function(a,b,c){var d=this.formElm.find("[name='"+c+"']");return a===d.val()},remote:function(a,b,c,d){}},submit:function(a,b){this.elements().removeClass("flyer-form-error"),this.formElm.find(".flyer-form-error").removeClass("flyer-form-error"),this.formCheck()?this.options.isFormSumbit?this.formElm.submit():("function"==typeof b&&b.call(this),a.preventDefault()):a.preventDefault()},showError:function(a,b){if(flyer&&flyer.msg){flyer.closeAll("msg");for(var c="",d=0,e=this.errorMsg[a],f=e.length;f>d;d++)c+=e[d]+"</br>";flyer.msg(c)}var g=$(b);g.hasClass("filter-options")?g.parent().addClass("flyer-form-error"):this.checkable(b)?/radio/i.test(b.type)?this.findByName(a).next().addClass("flyer-form-error"):this.findByName(a).parent().addClass("flyer-form-error"):g.addClass("flyer-form-error"),g.focus()},getData:function(){for(var a=[],b=0,c=this.elements(),d=c.length;d>b;b++)a.push(JSON.parse('{"'+c[b].name+'":"'+this.elementValue(c[b])+'"}'));return a}},new d(a,b,c)}),flyer.define("searches",function(a,b){function c(a,b){return this.init(a,b)}var d=["flyer-searches","keywords","flyer-seraches-input","fa fa-close","flyer-combobox-items","hover"];return c.DEFAULT={isMulti:!0,url:"",searchName:"",fieldValue:"",fieldName:"",requestData:[],spaceTime:1e3,separtor:";",distinck:!0,emptyMsg:"未检索到相关的数据..",fnDistinckTips:function(a,b){flyer.closeAll("msg"),flyer.msg("你已经选择了[ "+$(b).text()+" ]")},fnDataProcessing:function(){this._data=this._data.rows},fnSelected:function(){return!1}},c.prototype={init:function(a,b){this.options=$.extend(!0,{},c.DEFAULT,b),this[0]=a,$(this[0]).html(this.template()),this.events()},template:function(){var a=['<div class="flyer-searches">','<div class="keywords"></div>','<input type="text" data-selected="" class="flyer-seraches-input" />','<div class="flyer-combobox-items">',"<ul>","</ul>","</div>","</div>"];return a.join("")},requestData:function(a){var b=this,c=b.options,d={};"function"==typeof c.requestData?c.requestData.call(this,a):(d[c.searchName]=a,$.ajax({url:c.url,type:"get",data:d,success:function(a){b._data=a,c.fnDataProcessing.call(b,a),b.render(a),b.eventSelected()}}))},events:function(){var a=this,b=a.options,c=null;a.keyIndex=-1,a.$input=$(a[0]).find("."+d[2]),a.$keywords=$(a[0]).find("."+d[1]),a.$items=$(a[0]).find("."+d[4]).find("ul"),a.$input.on("keyup",function(e){c&&clearInterval(c);var f=$(this).val().trim();switch(e.keyCode){case 13:var g=a.$items.parent().css("display");return void(f.length>0&&"none"==g?a.requestData(f):(a.$items.find("."+d[5]).click(),a.$items.find("li").removeClass(d[5])));case 8:return a.$items.parent().hide(),0!=this.value.length?!1:void("del"==this.getAttribute("del")?setTimeout(function(){a.$keywords.find("span>i").last().click()},100):(this.setAttribute("del","del"),a.$keywords.find("span").last().css("border","1px solid #F7B824")));case 38:return void a.keyUp();case 40:return void a.keyDown();default:a.$items.parent().hide(),this.setAttribute("del",null),a.$keywords.find("span").last().css("border","inherit")}c=setTimeout(function(){f.length>0&&a.requestData(f)},b.spaceTime)}),$(document).on("click",function(b){a.$items.parent().hide(),flyer.stop(b)})},eventSelected:function(){var a=this,b=a.options;a.$items.find("li").on("click",function(){var c=$(this).data("key");if(b.distinck&&a.hasValue(c))return b.fnDistinckTips.call(a,c,this),!1;a.$keywords.append(a.insertSpan.call(this,b)),a.$items.parent().hide();var d=a.$input.data("selected")||"";a.$input.data("selected",d+c+";"),a.$input.val(""),a.eventDeleteSpan(),b.fnSelected.call(a,this),setTimeout(function(){a.$input.css("padding-left",a.$keywords.get(0).offsetWidth+10)},10),a.keyIndex=0})},insertSpan:function(a){var b=$(this),c="<span data-key='"+b.data("key")+"'>"+$(this).text()+a.separtor+"<i class='"+d[3]+"'></i></span>";return c},eventDeleteSpan:function(){var a=this,b=this.$input,c=this.options;a.$keywords.find("span>i").on("click",function(){var d=a.$input.data("selected")||"";b.data("selected",d.replace($(this).parent().data("key")+c.separtor,"")),$(this).parent().remove(),a.$input.css("padding-left",a.$keywords.get(0).offsetWidth),b.attr("del",null),c.fnSelected.call(a,this)})},render:function(){var a=this._data,b=[],c=this.options;if(a&&0!=a.length)for(var d=0,e=a.length;e>d;d++)b.push("<li data-key='"+a[d][c.fieldValue]+"'><div>"+a[d][c.fieldName]+"</div></li>");else b.push("<li><div>"+c.emptyMsg+"</div></li>");this.$items.html(b.join("")),this.$items.parent().show()},keyUp:function(){var a=this,b=a.$items.find("li").length;a.$items.find("li").removeClass(d[5]),-1==a.keyIndex&&(a.keyIndex=b),a.keyIndex--,a.$items.find("li").eq(a.keyIndex).addClass(d[5])},keyDown:function(){var a=this,b=a.$items.find("li").length;a.$items.find("li").removeClass(d[5]),a.keyIndex++,a.keyIndex==b&&(a.keyIndex=0),a.$items.find("li").eq(a.keyIndex).addClass(d[5])},hasValue:function(a){var b=this.$input.data("selected"),c=new RegExp(a,"ig");return c.test(b)},getSelectedData:function(){return{fieldValue:this.$input.data("selected"),fieldName:this.$keywords.find("span").text()}}},new c(a,b)}),flyer.define("tab",function(a,b){function c(a,b){return this.init(a,b)}var d=["flyer-tab","flyer-tab-title","flyer-tab-content","flyer-tab-active","flyer-tab-item","active"];return c.DEFAULT={tabs:[{title:"tab1",content:"",url:"",cache:!1},{title:"tab2",content:"",url:"",cache:!1}],defaultIndex:0,skin:"flyer-tab-default",beforeClick:function(){return!1},click:function(){return!1},afetrClick:function(){return!1},beforeCreated:function(){return!1},afterCreated:function(){return!1}},c.prototype={init:function(a,b){this.options=$.extend(!0,{},c.DEFAULT,b),this[0]=a;var d=this.options,e=d.beforeCreated,f=d.afterCreated;e.call(this,d),this.hasTag(),this.haveTag||$(this[0]).html(this.template()),this.events(),f.call(this,d),this.$tabs.eq(d.defaultIndex).click()},hasTag:function(){$(this[0]).find("."+d[0]).length>0?this.haveTag=!0:this.haveTag=!1},template:function(){for(var a=this.options,b=[],c=[],e=['<div class="'+d[0]+(a.skin.length>0?" "+a.skin:"")+'">','<div class="'+d[1]+'">',"<ul>","</ul>","</div>",'<div class="'+d[2]+'">',"</div>","</div>"],f="",g=0,h=a.tabs.length,i=a.tabs;h>g;g++)b.push("<li data-index='"+g+"'>"+i[g].title+"</li>"),c.push("<div class='"+d[4]+"'></div>");return e.splice(3,0,b.join("")),e.splice(7,0,c.join("")),f=e.join("")},events:function(){var a=this,b=this.options;a.$title=$(this[0]).find("."+d[1]),a.$content=$(this[0]).find("."+d[2]),a.$tabs=this.$title.find("li"),a.$tabs.on("click",function(){var c=$(this),e=$(this).data("index");a.$tabs.removeClass(d[3]),c.addClass(d[3]),a.haveTag?a.showContent(e):a.fullContent(e),b.click.call(a,this)})},fullContent:function(a){var b=this.options.tabs[a],c=(this.$content,this.$content.find("."+d[4])),e=c.eq(a),f="";return 0==e.length?!1:(f=e.text(),c.removeClass(d[5]),b.content?b.cache&&0!=f.length||e.html(b.content):b.url&&(b.cache&&0!=f.length||e.load(b.url)),void e.addClass(d[5]))},showContent:function(a){var b=this.$content.find("."+d[4]),c=b.eq(a);return 0==c.length?!1:(b.removeClass(d[5]),void c.addClass(d[5]))}},new c(a,b)}),flyer.define("table",function(a,b){function c(a,b,d){var e=[];a.push("<tr>");for(var f=0,g=b.length;g>f;f++)a.push("<"+d+">"+b[f].title+"</"+d+">"),"object"==typeof b[f].field&&e.push(b[f].field);if(a.push("</tr>"),e.length>0)for(var h=0,i=e.length;i>h;h++)c(a,e[h],d);return a}var d=function(a,b){return this.init(a,b)};return d.DEFAULTS={columns:[],data:[],resizer:!1,width:"auto",height:"auto",fixedHeader:!0},d.COLUMN_DEFAULTS={radio:!1,checkbox:!1,checkboxEnabled:!0,field:void 0,title:void 0,titleTooltip:void 0,styles:{},className:void 0,sortable:!1,order:"asc",visible:!0,formatter:void 0,sorter:void 0,sortName:void 0},d.prototype={init:function(a,b){this.options=$.extend(!0,{},d.DEFAULTS,b),this.selector=a,this.template(),this.initEvents(),this.options.resizer&&this.initRgrips()},template:function(){var a=['<div class="flyer-table" style="width:'+this.options.width+";height:"+this.options.height+'">','<div class="flyer-table-toolbar">',"</div>",'<div class="flyer-table-resizer">',"</div>",'<div class="flyer-table-body">',"<table>","<thead>",this.initHeader(),"</thead>","<tbody>",this.initBody(),"</tbody>","<tfoot>","</tfoot>","</table>","</div>",'<div class="flyer-table-page">',"</div>","</div>"];this.selector.html(a.join("")),this.$header=this.selector.find("thead"),this.$body=this.selector.find("tbody")},initHeaderThemes:function(){var a=this,b=(a.options,a._flagColumns);this.$header.find("th").each(function(){var a=$(this),c=a.data("index");a.css(b[c].styles),a.addClass(b[c].className)})},initHeader:function(){for(var a=[],b=0,e=this.options.columns,f=e.length;f>b;b++)this.options.columns[b]=$.extend(!0,{},d.COLUMN_DEFAULTS,e[b]);return c(a,this.options.columns,"th"),a.join("")},parseHeader:function(){for(var a=[],b=0,e=this.options.columns,f=e.length;f>b;b++){this.options.columns[b]=$.extend(!0,{},d.COLUMN_DEFAULTS,e[b]);var g=e[b];g._index=b,this._flagColumns[b]=g}return c(a,this.options.columns,"th"),a.join("")},initBody:function(){for(var a=[],b=0,c=this.options.data,d=c.length;d>b;b++){var e=[];a.push("<tr>");for(var f=0,g=this.options.columns,h=g.length;h>f;f++){var i=g[f];i.visible&&(i.checkbox?a.push("<td data-index="+i._index+">"+("function"==typeof i.formatter?i.formatter(c[b],c[b][i.field]):"<input name='"+i.field+"' type='checkbox'/>")+"</td>"):i.radio?a.push("<td data-index="+i._index+">"+("function"==typeof i.formatter?i.formatter(c[b],c[b][i.field]):"<input name='"+i.field+"' type='radio'/>")+"</td>"):e.push("<td>"+("function"==typeof i.formatter?i.formatter(c[b],c[b][i.field]):c[b][i.field])+"</td>"))}a.push(e.join("")),a.push("</tr>")}return a.join("")},initFooter:function(){},initEvents:function(){this.checkAll()},checkAll:function(){var a=this;a.$header.find("input[type='checkbox']").on("click",function(){var b=this;a.selector.find("input[name='"+b.name+"']").each(function(){this.checked=b.checked})})},columnResizer:function(a){var b=this,c=this.selector.find(".flyer-rgrips .flyer-rgrips-resizer"),d=this.selector.find(".flyer-table"),e=d.offset().left,f=d.width();b.ismove=!1,c.bind("mousedown",function(a){document.body.onselectstart=function(){return!1},b.ismove=!0,b.rgripElm=$(this),b.rgripElmLeft=parseInt(b.rgripElm.css("left")||0),b.rgripNext=b.rgripElm.next(),b.rgripPrev=b.rgripElm.prev(),b.rgripNextLeft=parseInt(b.rgripNext.css("left")||0),b.rgripPrevLeft=parseInt(b.rgripPrev.css("left")||0),b.rgripTh=b.$header.find("th[data-index='"+b.rgripElm.data("index")+"']"),b.rgripNextTh=b.rgripTh.next(),b.rgripPrevTh=b.rgripTh.prev(),b.rgripElm.addClass("flyer-rgrips-drag"),d.addClass("user-select-none")}),$(document).mousemove(function(a){if(b.ismove){var c=b.rgripElm.get(0).offsetWidth+a.clientX-e;0>c?c=0:c>f?c=f:c>b.rgripNextLeft?c=b.rgripNextLeft:c<b.rgripPrevLeft&&(c=b.rgripPrevLeft),b.rgripElm.css("left",c)}}),$(document).mouseup(function(a){document.body.onselectstart=function(){return!0},b.ismove&&(b.ismove=!1,b.dragWidth=b.rgripElmLeft-parseInt(b.rgripElm.css("left")),b.dragValue=parseInt(String(b.dragWidth).replace("-","")),b.dragWidth<0?(b.rgripNext.css("left",b.rgripNextLeft-b.dragValue),b.rgripTh.css("width",parseInt(b.rgripTh.css("width"))+b.dragValue)):b.dragWidth>0&&(b.rgripPrev.css("left",b.rgripPrev-b.dragValue),b.rgripTh.css("width",parseInt(b.rgripTh.css("width"))-b.dragValue)),b.rgripElm.removeClass("flyer-rgrips-drag"),d.removeClass("user-select-none"),b.initRgrips())})},initRgrips:function(){var a=[],b=this.selector.find(".flyer-table-body table"),c=b.width(),d=b.height(),e=b.offset().left;a.push("<div class='flyer-rgrips' style='width:"+c+"px;'>"),this.$header.find("th").each(function(){var b=$(this),c=b.offset().left+b.get(0).offsetWidth-e;b.css("width",b.width()),a.push("<div style='left:"+c+"px;height:"+d+"px' data-index='"+b.data("index")+"' class='flyer-rgrips-resizer'></div>")}),b.css("width",c),a.push("</div>"),this.selector.find(".flyer-table-resizer").html(a.join("")),this.columnResizer()}},new d(a,b)}),flyer.define("tree",function(a,b){var c=function(a,b){return this.init(a,b)},d=["flyer-tree","flyer-tree-root","fa-caret-right","fa-caret-down","fa-folder-o","fa-folder-open-o","flyer-tree-show","flyer-tree-node"];return c.DEFAULTS={data:[],url:"",skin:"",click:function(){return!1}},c.DEFAULTS_DATA={name:"Tree",spread:!1,href:"",target:"_blank",childrens:[]},c.prototype={init:function(a,b){this.options=$.extend(!0,{},c.DEFAULTS,b),this.selector=a,this.template(),this.events(),this.__index=""},template:function(){var a=['<div class="'+d[0]+'">',this.recursion(this.options.data,!0,""),"</div>"];this.selector.append(a.join(""))},recursion:function(a,b,d){for(var e,f=['<ul class="flyer-tree-node '+(b?"flyer-tree-show":"")+'">'],g=0,h=a.length;h>g;g++)e=String(d).length>0?d+"."+g:g,a[g]=$.extend({},!0,c.DEFAULTS_DATA,a[g]),f.push("<li>"),f.push('<i class="fa '+(a[g].childrens.length>0?a[g].spread?"fa-caret-down":"fa-caret-right":"")+'"></i>'),f.push('<i class="fa '+(a[g].childrens.length>0?a[g].spread?"fa-folder-open-o":"fa-folder-o":"fa-file-o")+'"></i>'),f.push('<a _index="'+e+'"'+(a[g].href.length>0?'href="'+a[g].href+'" target="'+a[g].target+'"':"")+">"+a[g].name+"</a>"),a[g].childrens.length>0&&f.push(this.recursion(a[g].childrens,a[g].spread,e)),f.push("</li>");return f.push("</ul>"),f.join("")},changeIcon:function(a,b){var c=$(a).parent(),e=c.find("i");b?(e.eq(0).removeClass(d[2]).addClass(d[3]),e.eq(1).removeClass(d[4]).addClass(d[5])):(e.eq(0).removeClass(d[3]).addClass(d[2]),e.eq(1).removeClass(d[5]).addClass(d[4]))},events:function(){var a=this,b=[".flyer-tree",".fa-caret-right",".fa-folder-o",".fa-folder-open-o",".fa-caret-down"];this.selector.find(b[0]).off("click",b.splice(1,4)),this.selector.find(b[0]).on("click",b.splice(1,4),function(b){var c=$(b.target).nextAll("."+d[7]);c.length>0&&(c.hasClass(d[6])?(c.removeClass(d[6]),a.changeIcon(b.target,!1)):(c.addClass(d[6]),a.changeIcon(b.target,!0))),flyer.stop(b)}),this.selector.find(b[0]).off("click","a"),this.selector.find(b[0]).on("click","a",function(b){a.options.click.call(this,b.target,a.getData(b.target.getAttribute("_index")))})},getData:function(a){for(var b=String(a).split("."),c=this.options.data[b[0]],d=1,e=b.length;e>d;d++)c=c.childrens[b[d]];return c}},new c(a,b)}),flyer.define("upload",function(a,b){var c=function(a,b){return this.init(a,b)};return c.DEFAULTS={elem:"flyer-upload-file",text:"",url:"",method:"post",enctype:"multipart/form-data",ext:"",name:"avatar",success:function(){return!1}},c.prototype={init:function(a,b){this.options=$.extend(!0,{},c.DEFAULTS,b),this.selector=a,this.template(),this.events(),this.buildFrame(),this.checkInput()},template:function(){var a=this,b=a.options,c=['<div class="flyer-upload">','<form action="'+b.url+'" enctype="'+b.enctype+'" target="flyer_upload_iframe" method="'+b.method+'">',"</form>",'<button class="flyer-btn flyer-btn-default">','<i class="fa fa-plus-square-o"></i>',"<span>"+this.options.text+"</span>","</button>","</div>"];this.selector.wrap(c.join("")),this.$form=this.selector.parent(),this.$upload=this.$form.parent(),this.$submit=this.$upload.find(".flyer-btn"),this.buildFrame()},buildFrame:function(){0==$("#flyer_upload_iframe").length&&$("body").append('<iframe id="flyer_upload_iframe"  name="flyer_upload_iframe"></iframe>')},checkInput:function(){this.selector.attr("name")||this.selector.attr("name",this.options.name)},events:function(){var a=this,b=a.options;this.$submit.on("click",function(){a.selector.click()}),a.selector.on("change",function(){a.$form.submit();var c=$("#flyer_upload_iframe"),d=setInterval(function(){var e;try{e=c.contents().find("#rpsResult").text()}catch(f){console.info("错误信息:"+f),clearInterval(d)}if(e){clearInterval(d),c.contents().find("body").html("");try{e=JSON.parse(e)}catch(f){return e={},flyer.msg("请对上传接口返回JSON字符")}"function"==typeof b.success&&b.success(e,a.selector)}},50)}),this.selector.val("")}},new c(a,b)}),flyer.define("codes",function(a,b){var c=function(a,b){var c=this;a.length>1?a.each(function(){c.init($(this),b)}):c.init(a,b)};return c.DEFAULTS={tagName:"pre",title:"Code",height:"auto",encode:!0,about:!0},c.prototype={init:function(a,b){this[0]=a,this.options=$.extend(!0,{},c.DEFAULTS,b),this[0].replaceWith(this.template())},template:function(){var a=["<"+this.options.tagName+' class="codes">',"<h1>",this.options.title,this.options.about?'<a href="#">flyer.code</a>':"","</h1>","<ol>",this.adornContent(),"</ol>","</"+this.options.tagName+">"];return a.join("")},adornContent:function(){var a=this[0].html(),b=[];a=a?a.split("\n"):"";for(var c=0,d=a.length;d>c;c++)this.options.encode&&(a[c]=flyer.escapeHTML(a[c])),b.push("<li>"+a[c]+"</li>");return b.join("")}},new c(a,b)}),function(a,b){for(var c in b)!function(a,c){c.fn[a]=function(c){return this.each(function(){return b[a](this,c)})}}(c,a)}(jQuery,flyer);